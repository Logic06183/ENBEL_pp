<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <defs>
    <!-- Gradients for different pathway types -->
    <radialGradient id="climateGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </radialGradient>
    
    <radialGradient id="acuteGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d68910;stop-opacity:1" />
    </radialGradient>
    
    <radialGradient id="adaptiveGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </radialGradient>
    
    <radialGradient id="chronicGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
    </radialGradient>
    
    <radialGradient id="healthGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </radialGradient>
    
    <radialGradient id="demoGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d35400;stop-opacity:1" />
    </radialGradient>
    
    <!-- Arrow markers -->
    <defs>
      <marker id="arrowhead" markerWidth="12" markerHeight="9" 
              refX="10" refY="4.5" orient="auto" markerUnits="strokeWidth">
        <polygon points="0 0, 12 4.5, 0 9" fill="#2c3e50" />
      </marker>
      <marker id="redArrow" markerWidth="12" markerHeight="9" 
              refX="10" refY="4.5" orient="auto" markerUnits="strokeWidth">
        <polygon points="0 0, 12 4.5, 0 9" fill="#e74c3c" />
      </marker>
      <marker id="blueArrow" markerWidth="12" markerHeight="9" 
              refX="10" refY="4.5" orient="auto" markerUnits="strokeWidth">
        <polygon points="0 0, 12 4.5, 0 9" fill="#3498db" />
      </marker>
    </defs>
    
    <!-- Drop shadows -->
    <filter id="dropshadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-color="#00000030"/>
    </filter>
    
    <!-- Glow effects -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge> 
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="900" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    Figure 4: Conceptual Framework for Climate-Health XAI Pathways
  </text>
  
  <!-- Subtitle -->
  <text x="700" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#7f8c8d">
    Multi-temporal mechanistic pathways linking climate exposure to glucose metabolism through demographic modulation
  </text>
  
  <!-- Main Climate Exposure Node -->
  <g class="climate-node">
    <circle cx="150" cy="200" r="60" fill="url(#climateGrad)" filter="url(#dropshadow)"/>
    <text x="150" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Climate
    </text>
    <text x="150" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Exposure
    </text>
    <text x="150" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">
      Temperature
    </text>
    
    <!-- Climate details -->
    <text x="150" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      • Daily temperature</text>
    <text x="150" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      • Heat index</text>
    <text x="150" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      • Land temperature</text>
  </g>
  
  <!-- Temporal Processing Pathways -->
  <g class="temporal-pathways">
    <!-- Acute Pathway (0-3 days) -->
    <rect x="350" y="100" width="150" height="80" rx="15" fill="url(#acuteGrad)" filter="url(#dropshadow)"/>
    <text x="425" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">
      ACUTE PHASE
    </text>
    <text x="425" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#ffffff">
      0-3 Days
    </text>
    <text x="425" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">
      Direct Stress Response
    </text>
    <text x="425" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffffff">
      Peak SHAP: 76.2
    </text>
    
    <!-- Adaptive Pathway (5-14 days) -->
    <rect x="350" y="220" width="150" height="80" rx="15" fill="url(#adaptiveGrad)" filter="url(#dropshadow)"/>
    <text x="425" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">
      ADAPTIVE PHASE
    </text>
    <text x="425" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#ffffff">
      5-14 Days
    </text>
    <text x="425" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">
      Homeostatic Adjustment
    </text>
    <text x="425" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffffff">
      Declining effects
    </text>
    
    <!-- Chronic Pathway (21+ days) -->
    <rect x="350" y="340" width="150" height="80" rx="15" fill="url(#chronicGrad)" filter="url(#dropshadow)"/>
    <text x="425" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">
      CHRONIC PHASE
    </text>
    <text x="425" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#ffffff">
      21+ Days
    </text>
    <text x="425" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">
      Cumulative Dysfunction
    </text>
    <text x="425" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffffff">
      SHAP: 39.8
    </text>
  </g>
  
  <!-- Demographic Modulation Node -->
  <g class="demographic-node">
    <ellipse cx="700" cy="260" rx="80" ry="50" fill="url(#demoGrad)" filter="url(#dropshadow)"/>
    <text x="700" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Demographic
    </text>
    <text x="700" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Modulation
    </text>
    <text x="700" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ffffff">
      Race/Ethnicity
    </text>
    
    <!-- Interaction strength indicators -->
    <text x="700" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      Interaction Effects:
    </text>
    <text x="700" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e74c3c">
      • Race 4: High vulnerability
    </text>
    <text x="700" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f39c12">
      • Race 5: Moderate vulnerability
    </text>
    <text x="700" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#3498db">
      • Race 11: Lower vulnerability
    </text>
  </g>
  
  <!-- Health Outcome Node -->
  <g class="health-outcome">
    <circle cx="1050" cy="260" r="70" fill="url(#healthGrad)" filter="url(#dropshadow)"/>
    <text x="1050" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Glucose
    </text>
    <text x="1050" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff">
      Metabolism
    </text>
    <text x="1050" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#ffffff">
      Dysregulation
    </text>
    <text x="1050" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffffff">
      R² = 0.393
    </text>
    
    <!-- Outcome details -->
    <text x="1050" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      Measured outcomes:
    </text>
    <text x="1050" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      • Fasting glucose levels
    </text>
    <text x="1050" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      • Metabolic stability
    </text>
    <text x="1050" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      • Diabetes risk markers
    </text>
  </g>
  
  <!-- Pathway Arrows -->
  <g class="pathway-arrows">
    <!-- Climate to Temporal Pathways -->
    <path d="M 210,160 Q 280,120 350,140" stroke="#e74c3c" stroke-width="4" fill="none" marker-end="url(#redArrow)"/>
    <path d="M 210,200 Q 280,220 350,260" stroke="#e74c3c" stroke-width="4" fill="none" marker-end="url(#redArrow)"/>
    <path d="M 210,240 Q 280,320 350,380" stroke="#e74c3c" stroke-width="4" fill="none" marker-end="url(#redArrow)"/>
    
    <!-- Temporal to Demographic -->
    <path d="M 500,140 Q 600,200 620,240" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 500,260 L 620,260" stroke="#3498db" stroke-width="3" fill="none" marker-end="url(#blueArrow)"/>
    <path d="M 500,380 Q 600,320 620,280" stroke="#9b59b6" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Demographic to Health Outcome -->
    <path d="M 780,240 Q 900,230 980,240" stroke="#e67e22" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 780,260 Q 900,260 980,260" stroke="#e67e22" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>
    <path d="M 780,280 Q 900,290 980,280" stroke="#e67e22" stroke-width="4" fill="none" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- XAI Methodology Box -->
  <g class="xai-method">
    <rect x="50" y="500" width="600" height="180" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" rx="10" filter="url(#dropshadow)"/>
    <text x="350" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2c3e50">
      XAI Methodological Framework
    </text>
    
    <!-- Framework steps -->
    <g class="framework-steps">
      <!-- Step 1 -->
      <circle cx="100" cy="560" r="20" fill="#3498db" filter="url(#dropshadow)"/>
      <text x="100" y="566" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">1</text>
      <text x="130" y="566" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
        Climate-Health Feature Engineering
      </text>
      <text x="130" y="580" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">
        Temperature × demographic interactions across 21-day lags
      </text>
      
      <!-- Step 2 -->
      <circle cx="100" cy="610" r="20" fill="#e74c3c" filter="url(#dropshadow)"/>
      <text x="100" y="616" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">2</text>
      <text x="130" y="616" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
        Gradient Boosting Model Training
      </text>
      <text x="130" y="630" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">
        Optimized hyperparameters with cross-validation
      </text>
      
      <!-- Step 3 -->
      <circle cx="400" cy="560" r="20" fill="#f39c12" filter="url(#dropshadow)"/>
      <text x="400" y="566" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">3</text>
      <text x="430" y="566" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
        TreeSHAP Analysis
      </text>
      <text x="430" y="580" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">
        Feature importance and interaction detection
      </text>
      
      <!-- Step 4 -->
      <circle cx="400" cy="610" r="20" fill="#27ae60" filter="url(#dropshadow)"/>
      <text x="400" y="616" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">4</text>
      <text x="430" y="616" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
        Temporal Pattern Recognition
      </text>
      <text x="430" y="630" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">
        Multi-lag effect quantification and interpretation
      </text>
    </g>
    
    <!-- Performance metrics -->
    <rect x="480" y="540" width="150" height="80" fill="#ffffff" stroke="#bdc3c7" stroke-width="1" rx="5"/>
    <text x="555" y="555" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#2c3e50">
      Model Performance
    </text>
    <text x="555" y="570" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      Training R²: 0.717
    </text>
    <text x="555" y="585" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      Test R²: 0.393
    </text>
    <text x="555" y="600" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      Sample: n = 2,731
    </text>
    <text x="555" y="615" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">
      Mean |SHAP|: 8.7
    </text>
  </g>
  
  <!-- Clinical Translation Panel -->
  <g class="clinical-translation">
    <rect x="700" y="500" width="650" height="180" fill="#e8f5e8" stroke="#27ae60" stroke-width="2" rx="10" filter="url(#dropshadow)"/>
    <text x="1025" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2c3e50">
      Clinical Translation Framework
    </text>
    
    <!-- Three pillars of translation -->
    <g class="translation-pillars">
      <!-- Pillar 1: Precision Medicine -->
      <rect x="720" y="540" width="180" height="120" fill="#ffffff" stroke="#27ae60" stroke-width="2" rx="8" filter="url(#dropshadow)"/>
      <text x="810" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#27ae60">
        Precision Medicine
      </text>
      <text x="810" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Race-specific risk profiles
      </text>
      <text x="810" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Temporal risk prediction
      </text>
      <text x="810" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Personalized monitoring
      </text>
      <text x="810" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Targeted interventions
      </text>
      <text x="810" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Clinical decision support
      </text>
      
      <!-- Pillar 2: Public Health -->
      <rect x="920" y="540" width="180" height="120" fill="#ffffff" stroke="#e74c3c" stroke-width="2" rx="8" filter="url(#dropshadow)"/>
      <text x="1010" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e74c3c">
        Public Health
      </text>
      <text x="1010" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Early warning systems
      </text>
      <text x="1010" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Population surveillance
      </text>
      <text x="1010" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Health equity initiatives
      </text>
      <text x="1010" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Resource allocation
      </text>
      <text x="1010" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Climate adaptation
      </text>
      
      <!-- Pillar 3: Research -->
      <rect x="1120" y="540" width="180" height="120" fill="#ffffff" stroke="#9b59b6" stroke-width="2" rx="8" filter="url(#dropshadow)"/>
      <text x="1210" y="560" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9b59b6">
        Research Priorities
      </text>
      <text x="1210" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Mechanism validation
      </text>
      <text x="1210" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Intervention trials
      </text>
      <text x="1210" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Causal inference
      </text>
      <text x="1210" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Biomarker expansion
      </text>
      <text x="1210" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
        • Independent validation
      </text>
    </g>
  </g>
  
  <!-- Key Discovery Box -->
  <rect x="50" y="730" width="1300" height="120" fill="#fff3cd" stroke="#f39c12" stroke-width="3" rx="15" filter="url(#dropshadow)"/>
  <text x="700" y="755" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2c3e50">
    🏆 Key Breakthrough Discovery
  </text>
  
  <text x="700" y="780" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50">
    Climate-health relationships exhibit complex temporal dynamics with race-specific vulnerability patterns:
  </text>
  
  <text x="200" y="800" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    • Acute effects peak at 1-2 days (SHAP: 76.2) with immediate glucose dysregulation
  </text>
  <text x="200" y="815" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    • Chronic effects persist for 21+ days (SHAP: 39.8) indicating cumulative metabolic dysfunction
  </text>
  <text x="200" y="830" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    • Race 4 shows highest vulnerability (SHAP: 19.8) requiring targeted clinical interventions
  </text>
  
  <!-- Footer -->
  <text x="700" y="880" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
    Framework enables precision climate medicine through mechanistic understanding of temporal and demographic climate-health interactions
  </text>
</svg>