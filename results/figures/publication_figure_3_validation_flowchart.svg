<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1000" width="1200" height="1000">
  <!-- Figure 3: Validation Framework Flowchart -->
  
  <defs>
    <!-- Gradients for different validation stages -->
    <linearGradient id="discoveryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2c7fb8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7fcdbb;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="validationGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#253494;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#41b6c4;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="successGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#006d2c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#74c476;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.2"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333"/>
    </marker>
    
    <!-- Icons -->
    <g id="database-icon">
      <ellipse cx="15" cy="5" rx="14" ry="5" fill="#4a5568"/>
      <rect x="1" y="5" width="28" height="20" fill="#4a5568"/>
      <ellipse cx="15" cy="25" rx="14" ry="5" fill="#4a5568"/>
      <ellipse cx="15" cy="5" rx="12" ry="3.5" fill="#718096"/>
    </g>
    
    <g id="analysis-icon">
      <rect x="2" y="8" width="26" height="18" rx="2" fill="#4a5568"/>
      <polyline points="6,20 10,16 14,18 18,14 22,17" stroke="white" stroke-width="2" fill="none"/>
    </g>
    
    <g id="check-icon">
      <circle cx="15" cy="15" r="14" fill="#48bb78"/>
      <polyline points="8,15 13,20 22,10" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="1000" fill="white"/>
  
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#2c2c2c">
    Multi-Method Statistical Validation Framework
  </text>
  
  <text x="600" y="70" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#666">
    Comprehensive Validation Pipeline for Climate-Health Discoveries
  </text>
  
  <!-- Stage 1: Initial Discovery -->
  <g transform="translate(400, 100)">
    <rect x="0" y="0" width="400" height="100" rx="10" fill="url(#discoveryGrad)" filter="url(#shadow)"/>
    
    <use href="#database-icon" x="20" y="35" transform="scale(1.2)"/>
    
    <text x="200" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      Initial Discovery Phase
    </text>
    
    <text x="200" y="60" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white">
      18,205 Participants
    </text>
    
    <text x="200" y="80" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      Climate variables × Health biomarkers
    </text>
  </g>
  
  <!-- Arrow down -->
  <line x1="600" y1="200" x2="600" y2="240" stroke="#333" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Stage 2: Traditional Correlation Analysis -->
  <g transform="translate(300, 250)">
    <rect x="0" y="0" width="600" height="80" rx="10" fill="#e6f2ff" stroke="#08519c" stroke-width="2" filter="url(#shadow)"/>
    
    <use href="#analysis-icon" x="20" y="25" transform="scale(1.2)"/>
    
    <text x="80" y="35" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#08519c">
      Traditional Correlation Analysis
    </text>
    
    <text x="80" y="55" font-family="Arial, sans-serif" font-size="14" fill="#333">
      Pearson correlations | 95% Confidence Intervals | P-values &lt; 0.001
    </text>
    
    <rect x="480" y="20" width="100" height="40" rx="20" fill="#08519c"/>
    <text x="530" y="45" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      4 findings
    </text>
  </g>
  
  <!-- Parallel validation branches -->
  <line x1="600" y1="330" x2="350" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="600" y1="330" x2="600" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="600" y1="330" x2="850" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Bootstrap Validation -->
  <g transform="translate(100, 390)">
    <rect x="0" y="0" width="300" height="100" rx="10" fill="url(#validationGrad)" filter="url(#shadow)"/>
    
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Bootstrap Validation
    </text>
    
    <text x="150" y="50" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      1,000 iterations
    </text>
    
    <text x="150" y="70" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      Resampling with replacement
    </text>
    
    <text x="150" y="85" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      CI stability: ✓ All confirmed
    </text>
  </g>
  
  <!-- Permutation Testing -->
  <g transform="translate(450, 390)">
    <rect x="0" y="0" width="300" height="100" rx="10" fill="url(#validationGrad)" filter="url(#shadow)"/>
    
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Permutation Testing
    </text>
    
    <text x="150" y="50" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      1,000 permutations
    </text>
    
    <text x="150" y="70" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      Random label shuffling
    </text>
    
    <text x="150" y="85" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      False positive rate: &lt; 0.1%
    </text>
  </g>
  
  <!-- Multiple Testing Correction -->
  <g transform="translate(800, 390)">
    <rect x="0" y="0" width="300" height="100" rx="10" fill="url(#validationGrad)" filter="url(#shadow)"/>
    
    <text x="150" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      Multiple Testing Correction
    </text>
    
    <text x="150" y="50" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      Bonferroni adjustment
    </text>
    
    <text x="150" y="70" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      FDR control (q &lt; 0.05)
    </text>
    
    <text x="150" y="85" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">
      Adjusted p &lt; 0.001: ✓
    </text>
  </g>
  
  <!-- Convergence arrows -->
  <line x1="250" y1="490" x2="500" y2="540" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="600" y1="490" x2="600" y2="540" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="950" y1="490" x2="700" y2="540" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- DLNM Validation -->
  <g transform="translate(350, 550)">
    <rect x="0" y="0" width="500" height="100" rx="10" fill="#fff3cd" stroke="#ffc107" stroke-width="2" filter="url(#shadow)"/>
    
    <text x="250" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#856404">
      DLNM Cross-Validation
    </text>
    
    <text x="250" y="55" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#333">
      Distributed Lag Non-linear Models
    </text>
    
    <text x="125" y="80" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
      SBP: R² = 0.0107, p &lt; 0.001
    </text>
    
    <text x="375" y="80" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#333">
      Glucose: R² = 0.0176, p &lt; 0.001
    </text>
  </g>
  
  <!-- Arrow to final validation -->
  <line x1="600" y1="650" x2="600" y2="700" stroke="#333" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Final Validation Results -->
  <g transform="translate(300, 710)">
    <rect x="0" y="0" width="600" height="120" rx="10" fill="url(#successGrad)" filter="url(#shadow)"/>
    
    <use href="#check-icon" x="30" y="45" transform="scale(1.5)"/>
    
    <text x="300" y="40" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="white">
      Final Validation: 4/4 Findings Confirmed
    </text>
    
    <text x="300" y="65" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="white">
      100% Success Rate Across All Validation Methods
    </text>
    
    <text x="150" y="95" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      • Robust to resampling
    </text>
    
    <text x="450" y="95" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      • Not due to chance
    </text>
    
    <text x="300" y="110" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white">
      • Survives multiple testing correction
    </text>
  </g>
  
  <!-- Statistical Thresholds Panel -->
  <g transform="translate(50, 860)">
    <rect x="0" y="0" width="520" height="100" rx="8" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
    
    <text x="260" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">
      Statistical Thresholds Applied
    </text>
    
    <text x="20" y="50" font-family="Arial, sans-serif" font-size="13" fill="#333">
      • Significance level: α = 0.001 (Bonferroni-adjusted)
    </text>
    
    <text x="20" y="70" font-family="Arial, sans-serif" font-size="13" fill="#333">
      • Effect size: |r| &gt; 0.10 (clinically meaningful)
    </text>
    
    <text x="20" y="90" font-family="Arial, sans-serif" font-size="13" fill="#333">
      • Sample size: n &gt; 2,500 (adequate power)
    </text>
  </g>
  
  <!-- Validation Criteria Met -->
  <g transform="translate(630, 860)">
    <rect x="0" y="0" width="520" height="100" rx="8" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
    
    <text x="260" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">
      Validation Criteria (6/6 Met)
    </text>
    
    <text x="20" y="50" font-family="Arial, sans-serif" font-size="13" fill="#333">
      ✓ Statistical significance    ✓ Effect size threshold
    </text>
    
    <text x="20" y="70" font-family="Arial, sans-serif" font-size="13" fill="#333">
      ✓ Bootstrap stability         ✓ Permutation robustness
    </text>
    
    <text x="20" y="90" font-family="Arial, sans-serif" font-size="13" fill="#333">
      ✓ Multiple testing survival   ✓ Independent method confirmation
    </text>
  </g>
  
  <!-- Figure number -->
  <text x="1150" y="980" font-family="Arial, sans-serif" font-size="12" font-style="italic" text-anchor="end" fill="#999">
    Figure 3
  </text>
</svg>